{"version":3,"file":"index.c57eb3f3.js","sources":["../../vite/modulepreload-polyfill","../../vite/preload-helper","../../src/routes/prefix.ts","../../src/pages/home.tsx","../../src/pages/hi/[name].data.ts","../../src/routes/routes.ts","../../../../../../../../../../../@vite-plugin-pwa/virtual:pwa-register/solid","../../src/utils/serviceWorker/ReloadPrompt.tsx","../../src/pages/app.tsx","../../src/main.tsx"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","const scriptRel = 'modulepreload';const seen = {};const base = '/social/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', () => rej(new Error(`Unable to preload CSS for ${dep}`)));\n            });\n        }\n    })).then(() => baseModule());\n}","export const pathPrefix = String(import.meta.env.VITE_PATHPREFIX || '/');\n","/* eslint-disable react/react-in-jsx-scope,react/no-unknown-property */\nimport { createSignal } from 'solid-js';\nimport { useNavigate } from 'solid-app-router';\n\nimport styles from './home.module.css';\nimport { pathPrefix } from '@/routes/prefix';\n\nexport default function Home() {\n    const navigate = useNavigate();\n    const [count, setCount] = createSignal(0);\n    const [name, setName] = createSignal('');\n\n    const handleChange = (event) => {\n        setName(event.target.value || '');\n    };\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        const submit = name();\n        if (submit && submit.trim().length > 0) navigate(`/hi/${submit}`);\n    };\n\n    return (\n        <div class={styles.Home}>\n            <p>\n                <button type=\"button\" onClick={() => setCount(count() + 1)}>\n                    count is: {count}\n                </button>\n            </p>\n            <br />\n            <form onSubmit={handleSubmit}>\n                <input\n                    value={name()}\n                    onChange={handleChange}\n                    type=\"text\"\n                    aria-label=\"What's your name?\"\n                    placeholder=\"What's your name?\"\n                />\n                <button type=\"submit\">GO</button>\n            </form>\n            <br />\n            <a href={`${pathPrefix}/about`}>About</a>\n\n            <br />\n            <br />\n\n            <a href={`${pathPrefix}/test/abc`}>abc</a>\n            <br />\n        </div>\n    );\n}\n","import type { RouteDataFunc } from 'solid-app-router';\n\nconst HiData: RouteDataFunc = (args) => {\n    const name = args.params.name || '';\n    return {\n        name: decodeURI(name),\n    };\n};\n\nexport default HiData;\n","import { lazy } from 'solid-js';\nimport type { RouteDefinition } from 'solid-app-router';\n\nimport Home from '@/pages/home';\nimport HiData from '@/pages/hi/[name].data';\n\nexport const routes: RouteDefinition[] = [\n    {\n        path: '/',\n        component: Home,\n    },\n    {\n        path: '/about',\n        component: lazy(() => import('@/pages/about')),\n    },\n    {\n        path: '/hi/:name',\n        component: lazy(() => import('@/pages/hi/[name]')),\n        data: HiData,\n    },\n    {\n        path: '/test/:id',\n        component: lazy(() => import('@/pages/test/[id]')),\n    },\n    {\n        path: '**',\n        component: lazy(() => import('@/pages/errors/404')),\n    },\n];\n","// src/client/build/solid.ts\nimport { createSignal } from \"solid-js\";\n\n// src/client/build/register.ts\nimport { Workbox, messageSW } from \"workbox-window\";\nvar autoUpdateMode = \"true\";\nvar auto = autoUpdateMode === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  let wb;\n  let registration;\n  const updateServiceWorker = async (reloadPage = true) => {\n    if (!auto) {\n      if (reloadPage) {\n        wb == null ? void 0 : wb.addEventListener(\"controlling\", (event) => {\n          if (event.isUpdate)\n            window.location.reload();\n        });\n      }\n      if (registration && registration.waiting) {\n        await messageSW(registration.waiting, { type: \"SKIP_WAITING\" });\n      }\n    }\n  };\n  if (\"serviceWorker\" in navigator) {\n    wb = new Workbox(\"/social/claims-sw.js\", { scope: \"/social/\", type: \"classic\" });\n    wb.addEventListener(\"activated\", (event) => {\n      if (event.isUpdate)\n        auto && window.location.reload();\n      else\n        onOfflineReady == null ? void 0 : onOfflineReady();\n    });\n    if (!auto) {\n      const showSkipWaitingPrompt = () => {\n        onNeedRefresh == null ? void 0 : onNeedRefresh();\n      };\n      wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n      wb.addEventListener(\"externalwaiting\", showSkipWaitingPrompt);\n    }\n    wb.register({ immediate }).then((r) => {\n      registration = r;\n      onRegistered == null ? void 0 : onRegistered(r);\n    }).catch((e) => {\n      onRegisterError == null ? void 0 : onRegisterError(e);\n    });\n  }\n  return updateServiceWorker;\n}\n\n// src/client/build/solid.ts\nfunction useRegisterSW(options = {}) {\n  const {\n    immediate = true,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisterError\n  } = options;\n  const [needRefresh, setNeedRefresh] = createSignal(false);\n  const [offlineReady, setOfflineReady] = createSignal(false);\n  const updateServiceWorker = registerSW({\n    immediate,\n    onOfflineReady() {\n      setOfflineReady(true);\n      onOfflineReady == null ? void 0 : onOfflineReady();\n    },\n    onNeedRefresh() {\n      setNeedRefresh(true);\n      onNeedRefresh == null ? void 0 : onNeedRefresh();\n    },\n    onRegistered,\n    onRegisterError\n  });\n  return {\n    needRefresh: [needRefresh, setNeedRefresh],\n    offlineReady: [offlineReady, setOfflineReady],\n    updateServiceWorker\n  };\n}\nexport {\n  useRegisterSW\n};\n","/* eslint-disable react/react-in-jsx-scope,react/no-unknown-property */\nimport { Component, Show } from 'solid-js';\nimport { useRegisterSW } from 'virtual:pwa-register/solid';\n\nimport styles from './ReloadPrompt.module.css';\n\nconst ReloadPrompt: Component = () => {\n    // replaced dynamically\n    const reloadSW = '__RELOAD_SW__';\n    const {\n        needRefresh: [needRefresh, setNeedRefresh],\n        offlineReady: [offlineReady, setOfflineReady],\n        updateServiceWorker,\n    } = useRegisterSW({\n        immediate: true,\n        onRegistered(r) {\n            // @ts-ignore\n            if (reloadSW === 'true') {\n                r &&\n                    setInterval(() => {\n                        // eslint-disable-next-line no-console\n                        console.log('Checking for sw update');\n                        r.update();\n                    }, 20000 /* 20s for testing purposes */);\n            } else {\n                // eslint-disable-next-line no-console\n                console.log(`SW Registered: ${r}`);\n            }\n        },\n        onRegisterError(error) {\n            console.error('SW registration error', error);\n        },\n    });\n\n    const close = () => {\n        setOfflineReady(false);\n        setNeedRefresh(false);\n    };\n\n    return (\n        <div class={styles.Container}>\n            <Show when={offlineReady() || needRefresh()}>\n                <div class={styles.Toast}>\n                    <div class={styles.Message}>\n                        <Show\n                            fallback={\n                                <span>\n                                    New content available, click on reload\n                                    button to update.\n                                </span>\n                            }\n                            when={offlineReady()}\n                        >\n                            <span>App ready to work offline</span>\n                        </Show>\n                    </div>\n                    <Show when={needRefresh()}>\n                        <button\n                            class={styles.ToastButton}\n                            onClick={() => updateServiceWorker(true)}\n                        >\n                            Reload\n                        </button>\n                    </Show>\n                    <button class={styles.ToastButton} onClick={() => close()}>\n                        Close\n                    </button>\n                </div>\n            </Show>\n        </div>\n    );\n};\n\nexport default ReloadPrompt;\n","import type { Component } from 'solid-js';\nimport { useRoutes } from 'solid-app-router';\n\nimport { routes } from '@/routes/routes';\nimport '@/style/style.css';\n\nimport ReloadPrompt from '@/utils/serviceWorker/ReloadPrompt';\n\n//import ReloadPrompt from '@/utils/serviceWorker/ReloadPrompt';\n/*const routes = createRouterTree([\n    {\n        path: '/',\n        component: lazy(() => import('@/pages/test')),\n    },\n    {\n        path: '/a',\n        component: lazy(() => import('@/pages/test/a')),\n    },\n    {\n        path: '/b',\n        component: lazy(() => import('@/pages/test/b')),\n    },\n    {\n        path: '/parameter/[id]',\n        component: lazy(() => import('@/pages/test/[id]')),\n    },\n    {\n        path: '/wildcard/[...list]',\n        component: lazy(() => import('@/pages/test/[...list]')),\n    },\n]);\n\nconst NotFound = lazy(() => import('@/pages/test/404'));\n\nexport default function App(): JSX.Element {\n    return (\n        <div class=\"flex items-center justify-center bg-gradient-to-l from-sky-400 to-indigo-600 min-h-screen\">\n            <Router routes={routes} fallback={<NotFound />} />\n        </div>\n    );\n}\n*/\n\nexport const App: Component = () => {\n    // replaced dynamically\n    const date = '__DATE__';\n\n    const Route = useRoutes(routes);\n\n    return (\n        <main class=\"flex items-center justify-center bg-gradient-to-l from-sky-400 to-indigo-600 min-h-screen\">\n            <Route />\n            <ReloadPrompt />\n        </main>\n    );\n};\n","import { render } from 'solid-js/web';\nimport { Router, hashIntegration } from 'solid-app-router';\n\n/*eslint import/no-unresolved: [2, { ignore: ['\\.tsx$'] }]*/\nimport { App } from '@/pages/app';\n\nrender(\n    () => (\n        <Router source={hashIntegration()} base={String(import.meta.env.VITE_PATHPREFIX || '/')}>\n            <App />\n        </Router>\n    ),\n    document.getElementById('app') as HTMLElement,\n);\n"],"names":["navigate","useNavigate","count","setCount","createSignal","name","setName","handleChange","event","target","value","handleSubmit","preventDefault","submit","trim","length","pathPrefix","styles","Home","Workbox","ReloadPrompt","needRefresh","setNeedRefresh","offlineReady","setOfflineReady","updateServiceWorker","useRegisterSW","immediate","onRegistered","r","setInterval","console","log","update","onRegisterError","error","close","ToastButton","Toast","Message","Container","App","Route","useRoutes","routes","render","hashIntegration","String","document","getElementById"],"mappings":"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"}